
<h1 id="msi-header">Maharaja Surajmal Institute</h1>

<h1><span>H</span>ome</h1>
<h4>Select achievement view</h4>
<ul class="nav nav-pills nav-fill">
  <li [class.active]="this.router.url.includes('/home/achievements')"><a routerLink="/home/achievements">Non - Academic achievements</a></li>
  <li [class.active]="this.router.url.includes('/home/academic')"><a routerLink="/home/academic">Academic achievements</a></li>
</ul>
<br>

<div id="mainContent">

  <h2 *ngIf="this.router.url.includes('/home/achievements')">List of Non - academic achievements</h2>
  <h2 *ngIf="this.router.url.includes('/home/academic')">List of Academic achievements</h2>

  <h4>Filter options</h4>
  <label class="switch">
    <input id="b" type="checkbox">
    <span class="slider round"></span>

  </label>
  <div id="filters" hidden="true">

    <form *ngIf="this.router.url.includes('/home/achievements')" (submit)="filter($event)" class="form-signin"
      action="" id="filter">
      <div id="filter-area-one">
        <div class="home-filters">
          <label for="rollNo">Enrollment No.</label>
          &nbsp;<input type="number" id="rollNo" name="rollNo" placeholder="Enrollment No." value="{{this.route.snapshot.queryParams['rollNo']}}">
        </div>
        <div class="home-filters">
          <label for="department" class="control-label">Department:</label>&nbsp;
          <select id="department" name="department" value="{{this.route.snapshot.queryParams['department']}}">
            <option value="">Select department</option>
            <option value="education">Education</option>
            <option value="computerscience">Computer Science</option>
            <option value="management">Management</option>
            <option value="commerce">Commerce</option>
          </select>
        </div>
        <div class="home-filters">
          <label for="semester">Semester:</label>&nbsp;
          <select id="semester" name="semester" value="{{this.route.snapshot.queryParams['semester']}}">&nbsp;
            <option value="">Select semester</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
          </select>
        </div>

        <div class="home-filters">
          <label for="section">Section:</label>
          <select id="section" name="section" value="{{this.route.snapshot.queryParams['section']}}">&nbsp;
            <option value="">Select section</option>
            <option>A</option>
            <option>B</option>
            <option>C</option>
          </select>
        </div>
        <div class="home-filters">
          <label for="shift" class="control-label">Shift:</label>&nbsp;
          <select id="shift" name="shift" placeholder="Shift" value="{{this.route.snapshot.queryParams['shift']}}">
            <option value="">Select shift</option>
            <option value="morning">Morning</option>
            <option value="evening">Evening</option>
          </select>
        </div>

      </div>

      <div id="filter-area-two">
        <div class="home-filters">
          <label for="sessionFrom" class="control-label">Batch:</label>
          &nbsp;<input type="number" id="sessionFrom" name="sessionFrom" placeholder="Begining year" value="{{this.route.snapshot.queryParams['from']}}">
          &nbsp;<input type="number" id="sessionTo" name="sessionTo" placeholder="Ending year" value="{{this.route.snapshot.queryParams['to']}}">
        </div>
      </div>

      <div id="filter-area-three">
        <div class="home-filters">
          <label for="dateFrom" class="control-label">Starting from:</label>
          &nbsp;<input type="date" id="dateFrom" name="dateFrom" placeholder="Starting from date" value="{{this.route.snapshot.queryParams['dateFrom']}}">
          &nbsp;
        </div>
        <div class="home-filters">
          <label for="dateTo" class="control-label">Till date:</label>
          &nbsp;<input type="date" id="dateTo" name="dateTo" placeholder="Till date" value="{{this.route.snapshot.queryParams['dateTo']}}">
        </div>

        <div class="home-filters">
          <label for="category" class="control-label">Category:</label>&nbsp;
          <select id="category" name="category" placeholder="Category" value="{{this.route.snapshot.queryParams['category']}}">
            <option value="">Select Category</option>
            <option value="sports">Sports</option>
            <option value="cultural">Cultural</option>
            <option value="technical">Technical</option>
            <option value="others">Others</option>
          </select>
        </div>
      </div>
      <div id="button-area">
        <button class="btn btn-crimson" type="submit">Apply filter</button>
        &nbsp;<button class="btn btn-crimson" (click)="resetFilters($event)">Reset filter</button>
      </div>
    </form>

    <form *ngIf="this.router.url.includes('/home/academic')" (submit)="filter($event)" class="form-inline" action=""
      id="filter">
<div id="filter-area-one">
        <div class="home-filters">
        <label for="section" class="">Batch:</label>&nbsp;
        <input type="number" id="from"  placeholder="Begining year" value="{{!!this.route.snapshot.queryParams['batch']?this.route.snapshot.queryParams['batch'].split('-')[0]:''}}">&nbsp;
        <input type="number" id="to" placeholder="Ending year" value="{{!!this.route.snapshot.queryParams['batch']?this.route.snapshot.queryParams['batch'].split('-')[1]:''}}">
      </div>
    </div>

    <div id="filter-area-two">

      <div class="home-filters">
        <label for="semester">Programme:</label>
        <select id="programme" name="programme"  value="{{this.route.snapshot.queryParams['programme']}}">
          <option value="">Select Programme</option>
          <option>B. Ed.</option>
          <option>BBA (H) 4 years</option>
          <option>BBA (General)</option>
          <option>BBA (B&I)</option>
          <option>BBA (T&TM)</option>
          <option>BCA</option>
          <option>B.Com (H)</option>
        </select>
      </div>
    </div>

    <div id="filter-area-three">

      <div class="home-filters">
        <label for="categoryA">Category:</label>
        <select id="categoryA" name="categoryA" value="{{this.route.snapshot.queryParams['category']}}">
          <option value="">Select Category</option>
          <option value="exemplary">Exemplary Performance</option>
          <option value="goldmedalist">Gold Medalist</option>
          <option value="both">Gold Medalist & Exemplary Performance</option>
        </select>
      </div>
</div>
      <br>
      <div class="form-group-row">
        <div id="button-area">
          <button class="btn btn-crimson" type="submit">Apply filter</button>
          &nbsp;<button class="btn btn-crimson" (click)="resetFilters($event)">Reset filter</button>
        </div>
      </div>
    </form>

  </div>
  <br>

  <button id="downloadList" hidden="true" class="btn btn-crimson btn-block" (click)="downloadList()"><i class="material-icons">
    cloud_download
    </i> Download as CSV</button>
<br>
  <div class="table-container">
  <table class="table-responsive" *ngIf="this.router.url.includes('/home/achievements') && achievements$.length > 0">
    <tr id="table-heading">
      <th>S.No.</th>
      <th>Enrollment No.</th>
      <th>Name</th>
      <th>Department</th>
      <th>Sem</th>
      <th>Section</th>
      <th>Event Name</th>
      <th>Role</th>
      <th>Category</th>
      <th>Details</th>
    </tr>
    <tr class="tr-hover" *ngFor="let achievement of achievements$; let i = index">
      <td>{{ i+1 }}</td>
      <td>{{ achievement.rollNo |uppercase}}</td>
      <td>{{ achievement.name | uppercase}}</td>
      <td>{{ achievement.department | uppercase }}</td>
      <td>{{achievement.semester}}</td>
      <td>{{ achievement.section | uppercase}}</td>
      <td>{{ achievement.eventName |uppercase }}</td>
      <td *ngIf="achievement.participated">PARTICIPANT</td>
      <td *ngIf="!achievement.participated">ORGANISER</td>
      <td>{{ achievement.category | uppercase }}</td>
      <td><button class="btn btn-blue" routerLink="/achievement/{{ achievement._id }}" id="detail-link"><i class="material-icons">
        remove_red_eye
        </i>

        View details</button></td>
    </tr>
  </table>
</div>
  <table *ngIf="this.router.url.includes('/home/academic') && achievements$.length > 0">
    <tr id="table-heading">
      <th>S.No.</th>
      <th>Enrollment No.</th>
      <th>Name</th>
      <th>Batch</th>
      <th>Programme</th>
      <th>Category</th>
    </tr>
    <tr class="tr-hover" *ngFor="let achievement of achievements$; let i = index">
      <td>{{ i+1 }}</td>
      <td>{{ achievement.rollNo }}</td>
      <td>{{ achievement.name }}</td>
      <td>{{ achievement.batch }}</td>
      <td>{{ achievement.programme }}</td>
      <td *ngIf="achievement.category=='goldmedalist'">Gold Medalist</td>
      <td *ngIf="achievement.category=='exemplary'">Exemplary Performance</td>
      <td *ngIf="achievement.category=='both'">Gold Medalist & Exemplary Performance</td>
    </tr>
  </table>

  <div id="homeLoading" style="text-align:center;" hidden="true">
    <img src="/assets/loadingCustom.svg" alt="Loading..." style="padding:5px;width:60px;height:60px;">
  </div>

  <h3 id="homeEmpty" hidden="true">No achievements found!</h3>
<br>
  <div *ngIf="this.router.url.includes('/home/achievements') && dataLength$ > 0" id="btn-area">
    <div class="row" style="display:inline-block;">
      <div class="col-xs-6">
        <button class="btn btn-crimson btn-block" (click)="loadMore($event)">Load more</button>
      </div>
    </div>
   </div>
</div>
